<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KubeVela Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GLR1Y52M7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5GLR1Y52M7",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="KubeVela" href="/opensearch.xml"><title data-react-helmet="true">Binding Traits | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/docs/next/end-user/binding-traits"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Binding Traits | KubeVela"><meta data-react-helmet="true" name="description" content="Traits is also one of the core concepts of the application. It acts on the component level and allows you to freely bind various operation and maintenance actions and strategies to the component. For example, configuration gateway, label management and container injection (Sidecar) at the business level, or flexible scaler at the admin level, gray release, etc."><meta data-react-helmet="true" property="og:description" content="Traits is also one of the core concepts of the application. It acts on the component level and allows you to freely bind various operation and maintenance actions and strategies to the component. For example, configuration gateway, label management and container injection (Sidecar) at the business level, or flexible scaler at the admin level, gray release, etc."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/docs/next/end-user/binding-traits"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/next/end-user/binding-traits" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/docs/next/end-user/binding-traits" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/next/end-user/binding-traits" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.e34c5d79.css">
<link rel="preload" href="/assets/js/runtime~main.8f4938c6.js" as="script">
<link rel="preload" href="/assets/js/main.932c7dde.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/end-user/binding-traits">Next</a></li><li><a class="dropdown__link" href="/docs/">v1.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/end-user/binding-traits" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/next/end-user/binding-traits" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li><li><a class="dropdown__link" href="/blog/kubevela-official-documentation-translation-event">Help Us Translate</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-githab-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/end-user/binding-traits">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">v1.0</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/next/end-user/binding-traits" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/docs/next/end-user/binding-traits" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">ç®€ä½“ä¸­æ–‡</a></li><li class="menu__list-item"><a class="menu__link" href="/blog/kubevela-official-documentation-translation-event">Help Us Translate</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-githab-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/quick-install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/first-application">Deploy First Application</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Core Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/core-concepts/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/core-concepts/application">Application</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">End User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/component-delivery">Component Delivery</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/end-user/binding-traits">Binding Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/cloud-services">Integrated Cloud Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/rollout-scaler">Rollout &amp; Scaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/component-observability">Component Observability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/component-dependency-parameter">Data Pass Between Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/end-user/multi-app-env-cluster">Multi-Cluster and Enviroment</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Policies</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/envbinding">Env-Binding</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Debugging</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/debug/live-diff">Live Diff</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Platform Admin Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Learning OAM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/oam/oam-model">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/oam/x-definition">X-Definition</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Learning CUE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/cue/basic">CUE Basic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/cue/definition-edit">Manage X-Definition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/cue/advanced">CUE Advanced</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Environment System</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/initializer/basic-initializer">Introduction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Addons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/addons/introduction">System Addon</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Component System</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Builtin Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/helm">Helm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/kustomize">Kustomize</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/raw">Raw</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/task">Task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/webservice">Web Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/worker">Worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/alicloud-ack">AliCloud ACK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/alicloud-oss">AliCloud OSS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/alicloud-rds">AliCloudRDS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/built-in/more">Want Moreï¼Ÿ</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/custom-component">CUE Component</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/component-terraform">Terraform Component</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Traits System</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Builtin Traits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/overview">OverView</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/ingress">Ingress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/manual-scaler">Manual Scaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/autoscaler">AutoScaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/annotations-and-labels">Labels and Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/sidecar">Attaching Sidecar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/service-binding">Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/kustomize-patch">Patch for Kustomize Component</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/built-in/more">Want More?</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/customize-trait">How-to</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/patch-trait">Patch Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/status">Status Write Back</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/advanced">Advanced Features</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Workflow System</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/steps">Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/context">Workflow Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/data-flow">Data Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/workflow/cue-actions">CUE Actions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">System Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">Bootstrap Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/observability">Observability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/performance-finetuning">Performance Fine-tuning</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Debugging</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/debug/dry-run">Dry Run</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/advanced-install">Custom Installation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Using KubeVela CLI</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Appfile</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/quick-start-appfile">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/learn-appfile">Learning Appfile</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Managing Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/config-enviroments">Setting Up Deployment Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/port-forward">Port Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/check-logs">Check Application Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/exec-cmd">Execute Commands in Container</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/cap-center">Managing Capabilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/config-app">Configuring data/env in Application</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_components">vela components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_config">vela config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_env">vela env</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_init">vela init</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_up">vela up</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_version">vela version</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_exec">vela exec</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_logs">vela logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_ls">vela ls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_port-forward">vela port-forward</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_show">vela show</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_status">vela status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_workloads">vela workloads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_traits">vela traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_system">vela system</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_template">vela template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela_cap">vela cap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/developers/references/kubectl-plugin">Kubectl plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/roadmap/README">KubeVela Roadmap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/developers/references/devex/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for KubeVela <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/">latest version</a></strong> (v1.0).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">Binding Traits</h1></header><div class="markdown"><p>Traits is also one of the core concepts of the application. It acts on the component level and allows you to freely bind various operation and maintenance actions and strategies to the component. For example, configuration gateway, label management and container injection (Sidecar) at the business level, or flexible scaler at the admin level, gray release, etc.</p><p>Similar to Component, KubeVela provides a series of out-of-the-box traits, and also allows you to customize and extend other operation and maintenance capabilities with traits.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubevelas-trait"></a>KubeVela&#x27;s Trait<a class="hash-link" href="#kubevelas-trait" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela traits</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                        NAMESPACE   APPLIES-TO          CONFLICTS-WITH  POD-DISRUPTIVE  DESCRIPTION</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">annotations                 vela-system *                                   true            Add annotations on K8s pod for your workload which follows</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            the pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">configmap                   vela-system *                                   true            Create/Attach configmaps on K8s pod for your workload which</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            follows the pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">env                         vela-system *                                   false           add env on K8s pod for your workload which follows the pod</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            spec in path &#x27;spec.template.&#x27;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ingress                     vela-system                                     false           Enable public web traffic for the component.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ingress-1-20                vela-system                                     false           Enable public web traffic for the component, the ingress API</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            matches K8s v1.20+.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">labels                      vela-system *                                   true            Add labels on K8s pod for your workload which follows the</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">lifecycle                   vela-system *                                   true            Add lifecycle hooks for the first container of K8s pod for</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            your workload which follows the pod spec in path</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">rollout                     vela-system                                     false           rollout the component</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">sidecar                     vela-system *                                   true            Inject a sidecar container to K8s pod for your workload</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                                                                            which follows the pod spec in path &#x27;spec.template&#x27;.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Below, we will take a few typical traits as examples to introduce the usage of KubeVela Trait.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-ingress-to-configure-the-gateway"></a>Use Ingress to Configure the Gateway<a class="hash-link" href="#use-ingress-to-configure-the-gateway" title="Direct link to heading">#</a></h2><p>We will configure a gateway for a Web Service component as an example. This component is pulled from the <code>crccheck/hello-world</code> image. After setting the gateway, it provides external access through <code>testsvc.example.com</code> plus port 8000.</p><p>Please directly copy the following Shell code, which will be applied to the cluster:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> kubectl apply -f -</span><span class="token string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># YAML begins</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  name: ingress-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  components:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">    - name: express-server</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      type: webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        image: crccheck/hello-world</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        port: 8000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      traits:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        - type: ingress</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            domain: testsvc.example.com</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            http:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">              &quot;/&quot;: 8000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># YAML ends</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can also save the YAML file as ingerss-app.yaml and use the <code>kubectl apply -f ingerss-app.yaml</code> command to deploy.</p><p>When we see that the status of the application is running and the service is healthy through <code>vela ls</code>, it means that the application is fully effective. At the same time, its TRAITS type is also correctly displayed as ingress.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">APP                     COMPONENT       TYPE        TRAITS  PHASE   HEALTHY STATUS  CREATED-TIME                 </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ingerss-app             express-server  webservice  ingress running healthy         </span><span class="token number">2021</span><span class="token plain">-08-28 </span><span class="token number">21</span><span class="token plain">:49:44 +0800 CST</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If the status is displayed as rendering, it means that it is still being rendered, or HEALTHY is always false, you need to use <code>kubectl get application ingress-app -o yaml</code> to view the error message in the return.</p><p>View the information returned:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get application ingress-app -o yaml</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token comment" style="color:rgb(98, 114, 164)"># Omit non-critical information</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token comment" style="color:rgb(98, 114, 164)"># Omit non-critical information</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">status:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token comment" style="color:rgb(98, 114, 164)"># Omit non-critical information</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  services:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  - healthy: </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    name: express-server</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    traits:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    - healthy: </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      message: </span><span class="token operator">|</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        No loadBalancer found, visiting by using </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;vela port-forward ingress-app&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      type: ingress</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    workloadDefinition:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      apiVersion: apps/v1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      kind: Deployment</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  status: running</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then, it is forwarded to the local processing request through vela port-forward ingress-app:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">vela port-forward ingress-app</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Forwarding from </span><span class="token number">127.0</span><span class="token plain">.0.1:8000 -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">8000</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Forwarding from </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">::1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">:8000 -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">8000</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Forward successfully</span><span class="token operator">!</span><span class="token plain"> Opening browser </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Handling connection </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token number">8000</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Access service:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Host:testsvc.example.com&quot;</span><span class="token plain"> http://127.0.0.1:8000/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">Hello World</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                       </span><span class="token comment" style="color:rgb(98, 114, 164)">##         .</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                                 </span><span class="token comment" style="color:rgb(98, 114, 164)">## ## ##        ==</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token comment" style="color:rgb(98, 114, 164)">## ## ## ## ##    ===</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                           /</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">___/ </span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                      ~~~ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">~~ ~~~~ ~~~ ~~~~ ~~ ~ /  </span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain">- ~~~</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                           </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">______ o          _,/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">       _,&#x27;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                             `</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;--.._\..--&#x27;</span><span class="token plain">&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="attach-labels-and-annotations-to-component"></a>Attach Labels and Annotations to Component<a class="hash-link" href="#attach-labels-and-annotations-to-component" title="Direct link to heading">#</a></h2><p>Labels and Annotations Trait allow you to attach labels and annotations to components, allowing us to trigger the marked components and obtain annotation information on demand when implementing business logic.</p><p>First, we prepare an example of an application, please copy and execute it directly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> kubectl apply -f -</span><span class="token string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># YAML begins</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  name: labels-annotations</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  components:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">    - name: server</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      type: webservice</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        image: crccheck/hello-world</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        port: 8000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      traits:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        - type: labels</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            &quot;release&quot;: &quot;stable&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        - type: annotations</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            &quot;description&quot;: &quot;web application&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># YAML ends</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the above business, we define the component named <code>server</code>, specify it for stable release through labels, and annotate it to be a business for web applications through annotations.</p><p>On the runtime cluster, use the <code>vela ls</code> command to check whether the application has been successfully created:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">APP                     COMPONENT       TYPE        TRAITS  PHASE   HEALTHY STATUS  CREATED-TIME                 </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">labels-annotations      server          webservice  labels,annotations  running healthy         </span><span class="token number">2021</span><span class="token plain">-08-29 </span><span class="token number">20</span><span class="token plain">:55:28 +0800 CST</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Through Kubernetes commands, we can see that the underlying resources have been labeled accordingly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get deployments server -o jsonpath=&#x27;{.spec.template.metadata.labels}&#x27;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;app.oam.dev/component&quot;:&quot;server&quot;,&quot;release&quot;:&quot;stable&quot;}</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get deployments server -o jsonpath=&#x27;{.spec.template.metadata.annotations}&#x27;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;app.oam.dev/component&quot;:&quot;server&quot;,&quot;release&quot;:&quot;stable&quot;}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inject-the-container-into-the-component-sidecar"></a>Inject the Container Into the Component (Sidecar)<a class="hash-link" href="#inject-the-container-into-the-component-sidecar" title="Direct link to heading">#</a></h2><p>As the existence of sidecar container decoupling from business container, it can help us with many auxiliary important tasks, such as common log proxy, used to implement Service Mesh, and so on.</p><p>Let&#x27;s write a <code>log-gen-worker</code> component in an application. At the same time, we point the log data directory recorded by the sidecar and the component to the same data storage volume <code>varlog</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> kubectl apply -f -</span><span class="token string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># YAML begins</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">apiVersion: core.oam.dev/v1beta1</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">kind: Application</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">metadata:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  name: vela-app-with-sidecar</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">spec:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  components:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">    - name: log-gen-worker</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      type: worker</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        image: busybox</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        cmd:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          - /bin/sh</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          - -c</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          - &gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            i=0;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            while true;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            do</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">              echo &quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token string" style="color:rgb(255, 121, 198)">: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot; &gt;&gt; /var/log/date.log;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">              i=</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$((</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">i</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">+</span><span class="token string variable number" style="color:rgb(189, 147, 249);font-style:italic">1</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">))</span><span class="token string" style="color:rgb(255, 121, 198)">;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">              sleep 1;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            done</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        volumes:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          - name: varlog</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            mountPath: /var/log</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            type: emptyDir</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">      traits:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">        - type: sidecar</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">          properties:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            name: count-log</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            image: busybox</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            cmd: [ /bin/sh, -c, &#x27;tail -n+1 -f /var/log/date.log&#x27;]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">            volumes:</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">              - name: varlog</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">                path: /var/log</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># YAML ends</span></div><div class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Use <code>vela ls</code> to check whether the application is successfully deployed:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ vela </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">APP                     COMPONENT       TYPE        TRAITS  PHASE   HEALTHY STATUS  CREATED-TIME                 </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">vela-app-with-sidecar   log-gen-worker  worker      sidecar             running healthy         </span><span class="token number">2021</span><span class="token plain">-08-29 </span><span class="token number">22</span><span class="token plain">:07:07 +0800 CST</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>After success, first to look out the workload generated by the application:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get pods -l app.oam.dev/component=log-gen-worker</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                              READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">log-gen-worker-7bb65dcdd6-tpbdh   2/2     Running   0          45s</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Finally, check the log output by the sidecar, you can see that the sidecar that reads the log has taken effect.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl logs -f log-gen-worker-7bb65dcdd6-tpbdh count-log</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Above, we took several common traits as examples to introduce how to bind traits. For more trait&#x27;s functions and parameters, please go to <a href="/docs/next/platform-engineers/traits/built-in/overview">built-in Trait</a> view.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="custom-trait"></a>Custom Trait<a class="hash-link" href="#custom-trait" title="Direct link to heading">#</a></h2><p>When the built-in Trait cannot meet your needs, you can freely customize the maintenance capabilities. Please refer to <a href="/docs/next/platform-engineers/traits/customize-trait">Custom Trait</a> in the Admin Guide for implementation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="next"></a>Next<a class="hash-link" href="#next" title="Direct link to heading">#</a></h2><ul><li><a href="/docs/next/end-user/cloud-services">Integrated Cloud Services</a>, learn how to integrate cloud services from various cloud vendors</li><li><a href="/docs/next/end-user/rollout-scaler">Rollout &amp; Scaler</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oam-dev/kubevela/edit/master/docs/en/end-user/binding-traits.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-09-02T07:55:54.000Z" class="lastUpdatedDate_1WI_">9/2/2021</time> by <strong>Wei (æ®µå°‘)</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/end-user/component-delivery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Component Delivery</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/end-user/cloud-services"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Integrated Cloud Services Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#kubevelas-trait" class="table-of-contents__link">KubeVela&#39;s Trait</a></li><li><a href="#use-ingress-to-configure-the-gateway" class="table-of-contents__link">Use Ingress to Configure the Gateway</a></li><li><a href="#attach-labels-and-annotations-to-component" class="table-of-contents__link">Attach Labels and Annotations to Component</a></li><li><a href="#inject-the-container-into-the-component-sidecar" class="table-of-contents__link">Inject the Container Into the Component (Sidecar)</a></li><li><a href="#custom-trait" class="table-of-contents__link">Custom Trait</a></li><li><a href="#next" class="table-of-contents__link">Next</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/install">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/platform-engineers/overview">Platform Admin Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/end-user/application">End User Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/end-user/">DingTalk (23310022)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© KubeVela Authors 2021 | Documentation Distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
        <br>
        Â© 2021 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.8f4938c6.js"></script>
<script src="/assets/js/main.932c7dde.js"></script>
</body>
</html>