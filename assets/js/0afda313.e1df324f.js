(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[92043],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return s},kt:function(){return h}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),h=i,m=d["".concat(p,".").concat(h)]||d[h]||u[h]||r;return n?a.createElement(m,o(o({ref:t},s),{},{components:n})):a.createElement(m,o({ref:t},s))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},48934:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return p},default:function(){return s}});var a=n(22122),i=n(19756),r=(n(67294),n(3905)),o={title:"Deploy Docker Image",description:"deploy the business application by kubevela"},l={unversionedId:"deliver-app/webservice",id:"deliver-app/webservice",isDocsHomePage:!1,title:"Deploy Docker Image",description:"deploy the business application by kubevela",source:"@site/docs/deliver-app/webservice.md",sourceDirName:"deliver-app",slug:"/deliver-app/webservice",permalink:"/docs/next/deliver-app/webservice",editUrl:"https://github.com/oam-dev/kubevela.io/edit/main/docs/deliver-app/webservice.md",version:"current",lastUpdatedBy:"Wei (\u6bb5\u5c11)",lastUpdatedAt:1640857781,formattedLastUpdatedAt:"12/30/2021",frontMatter:{title:"Deploy Docker Image",description:"deploy the business application by kubevela"},sidebar:"docs",previous:{title:"Installation",permalink:"/docs/next/install"},next:{title:"Deploy Helm Chart",permalink:"/docs/next/deliver-app/helm"}},p=[{value:"Before starting",id:"before-starting",children:[]},{value:"Creating an application",id:"creating-an-application",children:[]},{value:"Deploying the application",id:"deploying-the-application",children:[]},{value:"Update image",id:"update-image",children:[]},{value:"Update replicas",id:"update-replicas",children:[]},{value:"Upgrading the application",id:"upgrading-the-application",children:[]},{value:"Application recycling and deletion",id:"application-recycling-and-deletion",children:[]},{value:"Next Step",id:"next-step",children:[]}],c={toc:p};function s(e){var t=e.components,o=(0,i.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This article introduces how companies deliver business applications based on KubeVela. It does not require you to know much about Kubernetes."),(0,r.kt)("h2",{id:"before-starting"},"Before starting"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Containerize your business. No matter what language you're using, first to build an image via CI or locally."),(0,r.kt)("blockquote",{parentName:"li"},(0,r.kt)("p",{parentName:"blockquote"},"In the future, KubeVela plans to provide the image-build-up solution for multi-langs"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Place your business image at a hub that KubeVela can access to")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Make it clear what environment variables your business needs to set, and whether there are other middleware dependencies (such as databases, caches, etc.). If so, please deploy the middleware service first."))),(0,r.kt)("h2",{id:"creating-an-application"},"Creating an application"),(0,r.kt)("p",null,"Enter the page of Application on the left, click ",(0,r.kt)("inlineCode",{parentName:"p"},"New Application")," to create. Pick your name, alias, and description; Select type of ",(0,r.kt)("inlineCode",{parentName:"p"},"webservice"),"; Decide your environment, Default ENV is already available in the first place. You could also enter the page of Envs to set up new."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"create webservice application",src:n(6708).Z})),(0,r.kt)("p",null,"Click ",(0,r.kt)("inlineCode",{parentName:"p"},"Next Step")," so to the configuration page. We need to set up the Image address. If you want to set up a command for the image, open up the row ",(0,r.kt)("inlineCode",{parentName:"p"},"CMD"),". Also, set up Environment Variable in ",(0,r.kt)("inlineCode",{parentName:"p"},"ENV"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"set webservice application",src:n(77189).Z})),(0,r.kt)("p",null,"As the screenshot shows, we're deploying a ",(0,r.kt)("inlineCode",{parentName:"p"},"Wordpress")," app, filling in the name and setting up four Environment Variables. Ensure to have the right address of your database."),(0,r.kt)("p",null,"Done by clicking ",(0,r.kt)("inlineCode",{parentName:"p"},"Create")," and then we enter the management page."),(0,r.kt)("h2",{id:"deploying-the-application"},"Deploying the application"),(0,r.kt)("p",null,"Click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Deploy")," button on the upper right, it executes the default Workflow. Note that each Environment of the application has its workflow. On the right of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Benchmark Config")," tab is the environments. Check out the status of the environment and its instance information as you wish."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"webservice application env page",src:n(11877).Z})),(0,r.kt)("p",null,"When it has several Targets in this ENV, you may find them all in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Instances")," list. If you want to look at the process of application deployment, click ",(0,r.kt)("inlineCode",{parentName:"p"},"Check the details")," to reveal."),(0,r.kt)("p",null,"In the ",(0,r.kt)("inlineCode",{parentName:"p"},"Instances")," list, you may find some of them are in pending status. Click ",(0,r.kt)("inlineCode",{parentName:"p"},"+")," in the beginning to figure out the reason in more detail."),(0,r.kt)("h2",{id:"update-image"},"Update image"),(0,r.kt)("p",null,"After the first deployment, our business keeps evolving and the following updates come along."),(0,r.kt)("p",null,"Click ",(0,r.kt)("inlineCode",{parentName:"p"},"Benchmark Config")," and you can see the button ",(0,r.kt)("inlineCode",{parentName:"p"},"Edit Properties")," on the right. Then again we're on the configuration page to update your latest requirements for image, version, and environment variable."),(0,r.kt)("h2",{id:"update-replicas"},"Update replicas"),(0,r.kt)("p",null,"If your business requires more than one replicas, enter the ",(0,r.kt)("inlineCode",{parentName:"p"},"Properties")," page. By default, you have a ",(0,r.kt)("inlineCode",{parentName:"p"},"Set Replicas")," trait. Click the gear so that you can update the replicas."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"set application replicas",src:n(46221).Z})),(0,r.kt)("h2",{id:"upgrading-the-application"},"Upgrading the application"),(0,r.kt)("p",null,"By twos steps as above, it is still in a draft state, we need to click the deployment button again to complete the upgrade of the application."),(0,r.kt)("h2",{id:"application-recycling-and-deletion"},"Application recycling and deletion"),(0,r.kt)("p",null,"If you need to delete the application after testing, you need to recycle all the deployed environments first. Click the environment name to enter the environment instance list, and click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Recycle")," button to recycle the deployment of the application in that environment. After it's done, the application in this environment rolls back as an undeployed one."),(0,r.kt)("p",null,"After all of the environments have been recycled, the application can be deleted. Currently, the entry for application deletion is on the application list page. Back to the application list page, mouse on the menu icon on the right side of the application name, and click the ",(0,r.kt)("inlineCode",{parentName:"p"},"Remove")," option."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"delete application",src:n(40293).Z})),(0,r.kt)("p",null,"At this point, you have basically mastered the deployment method of Docker image."),(0,r.kt)("h2",{id:"next-step"},"Next Step"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"./helm"},"Learn to deploy Helm Chart")))}s.isMDXComponent=!0},40293:function(e,t,n){"use strict";t.Z=n.p+"assets/images/app-delete-2040ad684a714e54065057d357229e1b.jpg"},6708:function(e,t,n){"use strict";t.Z=n.p+"assets/images/create-webservice-ebf046413101428fc53e22324260c256.jpg"},46221:function(e,t,n){"use strict";t.Z=n.p+"assets/images/set-replicas-c8cb76c6e7849cf5687c7660bb88b00f.jpg"},77189:function(e,t,n){"use strict";t.Z=n.p+"assets/images/set-webservice-a2cafcdc6076a1d25b003d3b04528c04.jpg"},11877:function(e,t,n){"use strict";t.Z=n.p+"assets/images/webservice-env-747368b9e950f436fbe617830c436348.jpg"}}]);